[![OVERALL](HTTPS://IMG.SHIELDS.IO/ENDPOINT?STYLE=FLAT&URL=HTTPS%3A%2F%2FAPP.OPSLEVEL.COM%2FAPI%2FSERVICE_LEVEL%2FTXXR0LVVSM0HCJQ9NUIG3F0JXJSS7F7OPEQ2TTZ7RT0)](HTTPS://APP.OPSLEVEL.COM/SERVICES/REPORT_DEPLOY_GITHUB_ACTION/MATURITY-REPORT)

# OPSLEVEL - REPORT DEPLOY GITHUB ACTION

THIS ACTION EMITS A DEPLOY EVENT FOR SERVICE TO OPSLEVEL.

## INPUTS

### `INTEGRATION_URL`

**REQUIRED** THE OPSLEVEL DEPLOY INTEGRATION URL.

### `SERVICE`

THE SERVICE ALIAS FOR THE EVENT - DEFAULT: `<GITHUB_ORG_OR_USER_NAME>/<REPOSITORY_NAME>`

IF THE REPOSITORY HAS AN `./OPSLEVEL.YML` FILE THE SERVICE NAME WILL GET PULLED FROM IT.

### `DESCRIPTION`

THE DESCRIPTION OR RELEASE NOTES FOR THE EVENT - DEFAULT: ""

### `ENVIRONMENT`

THE ENVIRONMENT FOR THE EVENT - DEFAULT: ""

### `NUMBER`

THE DEPLOY NUMBER FOR THE EVENT - DEFAULT: `${GITHUB_RUN_NUMBER}`

### `DEPLOYER_NAME`

THE DEPLOYER NAME WHO CREATED THE EVENT - DEFAULT: `${GITHUB_ACTOR}`

### `DEPLOYER_EMAIL`

THE DEPLOYER EMAIL WHO CREATE THE EVENT - DEFAULT: ""

### `DEPLOY_URL`

THE DEPLOY URL THAT OPSLEVEL POINTS TO - DEFAULT: `${{ GITHUB.SERVER_URL }}/${{ GITHUB.REPOSITORY }}/ACTIONS/RUNS/${{ GITHUB.RUN_ID }}`

### `DEDUPLICATION_ID`

AN IDENTIFIER THAT CAN BE USED TO DEDUPLICATE DEPLOYMENTS - DEFAULT: `${GITHUB_RUN_ID}`

### `USE_DOCKER`

SEND DEPLOY USING DOCKER CONTAINER IF "TRUE" - USE OPSLEVEL CLI OTHERWISE - DEFAULT: `TRUE`

## REPORTING DEPLOY WITH DOCKER OR OPSLEVEL CLI

THIS ACTION CAN BE RUN USING EITHER DOCKER OR THE OPSLEVEL CLI, DEPENDING ON THE VALUE OF THE `USE_DOCKER` INPUT.

WHILE BOTH BEHAVE IDENTICALLY, THIS ACTION WILL RUN USING DOCKER BY DEFAULT - SEE [./WITH-DOCKER](./WITH-DOCKER).
FOR GITHUB WORKFLOWS OPERATING WITHIN INTENTIONAL CONSTRAINTS, PERHAPS WHERE BUILDING PUBLIC DOCKER IMAGES IS NOT
AN OPTION, IT MAY BE PREFERABLE TO USE THE OPSLEVEL CLI.

## EXAMPLE USAGE

```YAML
JOBS:
  DEPLOY:
    STEPS:
      - NAME: CHECKOUT
        USES: ACTIONS/CHECKOUT@V4
      - NAME: REPORT DEPLOY
        USES: OPSLEVEL/REPORT-DEPLOY-GITHUB-ACTION@V1.0.0
        WITH:
          INTEGRATION_URL: ${{ SECRETS.DEPLOY_INTEGRATION_URL }}
          SERVICE: "MY-SERVICE"
          USE_DOCKER: "TRUE"
```

IF YOU WANT TO ADD THE GIT COMMIT AUTHOR AS THE DEPLOYER

```YAML
JOBS:
  DEPLOY:
    STEPS:
      - NAME: CHECKOUT
        USES: ACTIONS/CHECKOUT@V4
      - NAME: GET DEPLOYER
        ID: DEPLOYER
        RUN: |
          DEPLOYER=$(GIT SHOW -S --FORMAT='%AE')
          ECHO "DEPLOYER=${DEPLOYER}" >> $GITHUB_OUTPUT
      - NAME: REPORT DEPLOY
        USES: OPSLEVEL/REPORT-DEPLOY-GITHUB-ACTION@V1.0.0
        WITH:
          INTEGRATION_URL: ${{ SECRETS.DEPLOY_INTEGRATION_URL }}
          SERVICE: "MY-SERVICE"
          DEPLOYER_EMAIL: ${{ STEPS.DEPLOYER.OUTPUTS.DEPLOYER }}
          USE_DOCKER: "FALSE"
```
